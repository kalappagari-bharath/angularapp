apiVersion: apps/v1
kind: Deployment
metadata:
  name: akash
spec:
  replicas: 3  # Set the number of replicas as needed
  selector:
    matchLabels:
      app: akash
  template:
    metadata:
      labels:
        app: akash
    spec:
      containers:
      - name: akash
        image: akiakash384.azurecr.io/akashdoc:latest
        ports:
        - containerPort: 80
---
apiVersion: v1
kind: Service
metadata:
  name: angular-service
spec:
  selector:
    app: akash
  ports:
    - protocol: TCP
      port: 80
      targetPort: 80
  type: LoadBalancer  # Change to ClusterIP or NodePort based on your needs
users:
- name: appregaks1-aad
  user:
    exec:
      apiVersion: client.authentication.k8s.io/v1beta1
      command: kubelogin
      args:
      - get-token
      - --adal-tenant-id=9b415834-803a-4da0-afdc-fe6b1d52d649
      - --adal-client-id=868c882f-1ed9-4b42-b723-e50a0a74e4c4
      - --adal-client-secret-stdin
      - --adal-resource=<your-resource>
      - --adal-prompt=auto
